clear
clc
%% palm oil T(oC)  muy(mPa.s)  C(kJ/kg.K) W(w/m.K) d(kg/m3) 
t_dau = [ 20	25	30	35	40	45	50	55	60	65	70	75	80	85	90	95	100	105	110	115	120	130	135	140	145	150	155	160	165	170	175	180	185	190	195	200	205	210	215	220	225	230	240	245	250	255	260	275	280	285	290	295	300 ];
muy_dau = [ 106.8	77.19	57.85	44.68	35.41	28.68	23.68	19.88	16.93	14.61	12.75	11.23	9.99	8.955	8.087	7.351	6.721	6.179	5.709	5.298	4.937	4.335	4.083	3.857	3.653	3.469	3.302	3.151	3.012	2.885	2.769	2.662	2.563	2.471	2.387	2.308	2.234	2.166	2.102	2.042	1.986	1.933	1.836	1.792	1.751	1.711	1.674	1.572	1.542	1.513	1.485	1.459	1.434 ];
cp_dau = [ 1.848	1.861	1.875	1.888	1.902	1.916	1.93	1.944	1.959	1.973	1.988	2.003	2.018	2.034	2.049	2.065	2.081	2.097	2.113	2.129	2.146	2.179	2.197	2.214	2.231	2.249	2.267	2.284	2.303	2.321	2.339	2.358	2.377	2.396	2.415	2.434	2.454	2.473	2.493	2.513	2.533	2.554	2.595	2.616	2.637	2.658	2.68	2.745	2.767	2.789	2.812	2.834	2.857 ];
lamda_dau = [ 0.1726	0.1721	0.1717	0.1712	0.1708	0.1704	0.1699	0.1695	0.1691	0.1687	0.1683	0.1679	0.1675	0.1671	0.1668	0.1664	0.166	0.1657	0.1653	0.165	0.1646	0.164	0.1636	0.1633	0.163	0.1627	0.1624	0.1621	0.1618	0.1615	0.1613	0.131	0.1607	0.1605	0.1602	0.16	0.1597	0.1595	0.1693	0.1591	0.1589	0.1586	0.1582	0.1581	0.1579	0.1577	0.1575	0.157	0.1569	0.1568	0.1566	0.1565	0.1564 ];
ro_dau = [ 890.1	887.5	885	882.5	880	877.5	875.1	872.6	870.2	867.8	865.4	863.1	860.7	858.4	856.1	853.8	851.6	849.3	847.1	844.9	842.7	838.4	836.3	834.2	832.1	830	828	825.9	823.9	821.9	819.9	818	816.1	814.1	812.2	810.4	808.5	806.7	804.9	803.1	801.3	799.5	796.1	794.4	792.7	791	789.4	784.6	783	781.5	779.9	778.4	776.9 ];
ro = interp1(t_dau,ro_dau,250);
M_dau = 847.3 ;%g/mol
%% 
M_hoi = 18;
G_dau = 1808.2; %kg/h dau
%Liquid loading
L = G_dau/(M_dau); %kmol/h
x_in = 1;
x_out = 0.05;
y_in = 0;
y_out = 0.9;
P_tot = 3 ; %mbar
T = 250; %oC
% Hang so cho pt Antonie
A = 5.35728;
B = 3061.422;
C = -55.077;
P_oi = 10^(A - B/(C+T+273))*1000;%mbar %10^3
%P_oi = 13.33;
% Pt tinh luong hoi cho khu mui
E = 0.7;
S = (P_tot/(E*P_oi))*logm((x_in/100)/(x_out/100))+(P_tot/(E*P_oi)-1)*(x_in/100-x_out/100);
m_hoi = ((S*18)/847)*G_dau*10;
%Liquid loading

G = m_hoi/(M_hoi); %kmol/h
%Hang so can bang pha
K = P_oi/P_tot
m = K;
%Strippingfaktor

s = m*(G/L);
%So don vi truyen khoi phia long
NTU = (logm((1-1/s)*(x_in-y_in/m)/(x_out-y_in/m)+1/s))/(1-1/s)
%So dia ly thuyet
M = (x_in - y_in/m)/(x_out - y_in/m);
NT = (log10((1-1/s)*M+1/s))/(log10(s))

